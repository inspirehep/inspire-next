<div
  ng-init="order={'data_type': 'Type', 'status': 'Status', 'author': 'Author', 'workflow_name': 'Workflow Name'}">
  <div ng-if="vm.invenioSearchResults.aggregations[key].buckets.length"
       ng-repeat="(key, title) in order" class="facet-container">
    <h4>Filter by {{ title }}</h4>

    <ul class="list-unstyled" class="hp-facet-item"
        ng-controller="FacetsShowMoreController">
      <li
        ng-repeat="item in vm.invenioSearchResults.aggregations[key].buckets | limitTo: facetResults"
        ng-click="handleClick(key, item.key)"
        ng-class="{'active' : handler[key].indexOf(item.key) > -1,
              error: item.key === 'ERROR',
              attention : item.key === 'HALTED',
              inprogress : item.key === 'WAITING',
              inprogress : item.key === 'RUNNING',
              done: item.key === 'COMPLETED',
              arxiv: item.key === 'arXiv',
              literature: item.key === 'hep',
              authornew: item.key === 'authors',
              literature : item.key === 'Literature Suggestion',
              'oai-harvest': item.key === 'OAI Harvest',
              authornew: item.key === 'New Author',
              authorupdate: item.key === 'Author Update'}">
        <span class="facet-title-truncate"><i class="fa fa-times"
                                              ng-if="handler[key].indexOf(item.key) > -1"></i> {{ item.key }}</span>
        <span class="facet-label label label-default pull-right">{{ item.doc_count }}</span>
      </li>
      <div
        ng-show="vm.invenioSearchResults.aggregations[key].buckets.length > facetResults">
        <a ng-click="moreFacetResults()">Show {{calculateStep(key)}} more</a>
      </div>
    </ul>

    <hr ng-if="!$last">
  </div>
</div>
